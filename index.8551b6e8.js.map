{"mappings":"YAAA,IAcIA,EAdEC,EAAO,CACXC,WAAYC,SAASC,cAAc,gBACnCC,gBAAiBF,SAASC,cAAc,YACxCE,YAAaH,SAASC,cAAc,eAKlCG,EAAO,EA4DX,SAASC,IACP,IACMC,EAAS,IAAIC,gBAAgB,CACjCC,IAAK,qCACLC,EAAGZ,EACHa,WAAY,QACZC,YAAa,aACbC,YAAY,EACZC,SAlEW,GAmEXC,KAAAV,IAKIW,EAAM,GAAgBC,OAbX,0BAaO,MAAWA,OAAPV,GAE5B,OADAW,QAAQC,IAAIH,GACLI,MAAMJ,GAAKK,MAAK,SAAAC,GACrB,IAAKA,EAASC,GACZ,MAAM,IAAIC,MAAMF,EAASG,QAG3B,OAAOH,EAASI,M,IAIpB,SAASC,EAAWC,GAClB,IAAMC,EAASD,EACZE,KAAI,SAAAC,GACH,MAAO,+CACkCd,OAA3Bc,EAAKC,aAAa,WAGdf,OAHuBc,EAAKE,KAAK,yGAMjChB,OAHAc,EAAKG,MAAM,6EAMRjB,OAHHc,EAAKI,MAAM,gFAMPlB,OAHDc,EAAKK,SAAS,iFAGEnB,OAAfc,EAAKM,UAAU,uD,IAKtCC,KAAK,IAERvC,EAAKI,gBAAgBoC,mBAAmB,YAAaV,E,CArGvD9B,EAAKK,YAAYoC,UAAUC,IAAI,aAE/B1C,EAAKC,WAAW0C,iBAAiB,UAGjC,SAAkBC,GAUhB,GATAA,EAAEC,iBAEF7C,EAAKK,YAAYoC,UAAUC,IAAI,aAgGjC,WACE1C,EAAKI,gBAAgB0C,UAAY,G,CA/FlCC,GAECzC,EAAO,IACPP,EAAQ6C,EAAEI,cAAcC,SAASC,YAAYC,OAI3C,YADAC,MAAO,cAIT7C,IACGe,MAAK,SAAA+B,GACoB,GAApBA,EAAKC,KAAKC,QAKdpC,QAAQC,IAAIiC,GACZzB,EAAWyB,EAAKC,OALdF,MAAO,0F,IAOVI,OAAM,SAAAC,G,OAAStC,QAAQC,IAAIqC,E,IAE9BzD,EAAKK,YAAYoC,UAAUiB,OAAO,Y,IA7BpC1D,EAAKK,YAAYsC,iBAAiB,SAgClC,WACErC,GAAQ,EAERC,IACGe,MAAK,SAAA+B,GACFlC,QAAQC,IAAIiC,EAAKM,WACfrD,EAAQ,EAAK+C,EAAKM,UA9Cb,GA+CPP,MAAO,yEAKPxB,EAAWyB,EAAKC,K,IAGnBE,OAAM,SAAAC,G,OAAStC,QAAQC,IAAIqC,E","sources":["src/index.js"],"sourcesContent":["const refs = {\n  searchForm: document.querySelector('.search-form'),\n  photosContainer: document.querySelector('.gallery'),\n  loadMoreBtn: document.querySelector('.load-more'),\n};\n\n// let isAlertVisible = false;\n// Controls the group number\nlet page = 1;\n// Controls the number of items in the group\nlet per_page = 40;\n// let totalHits;\n// // In our case total number of pages is calculated on frontend\n// const totalPages = 100 / limit;\nlet query;\nrefs.loadMoreBtn.classList.add('is-hidden');\n\nrefs.searchForm.addEventListener('submit', onSearch);\nrefs.loadMoreBtn.addEventListener('click', onLoad);\n\nfunction onSearch(e) {\n  e.preventDefault();\n\n  refs.loadMoreBtn.classList.add('is-hidden');\n\n clearPhotosContainer();\n\n  page = 1;\n  query = e.currentTarget.elements.searchQuery.value;\n\n  if (!query) {\n    alert(`Pole puste`);\n    return;\n  }\n\n  fetchPhotos()\n    .then(data => {\n      if (data.hits.length == 0) {\n        alert(`Sorry, there are no images matching your \n              search query. Please try again`);\n        return;\n      }\n      console.log(data);\n      renderHits(data.hits);\n    })\n    .catch(error => console.log(error));\n\n  refs.loadMoreBtn.classList.remove('is-hidden');\n}\n\nfunction onLoad() {\n  page += 1;\n\n  fetchPhotos()\n    .then(data => {\n        console.log(data.totalHits);\n      if ((page - 1) > data.totalHits/per_page) {\n        alert(`We're sorry, but you've reached the end of \n         search results.`);\n        return;\n      }\n\n        renderHits(data.hits);  \n\n    })\n    .catch(error => console.log(error));\n}\n\nfunction fetchPhotos() {\n  const BASE_URL = 'https://pixabay.com/api';\n  const params = new URLSearchParams({\n    key: '39342201-f813eddd1adb93dcbf05db88a',\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page,\n    page,\n  });\n  //     const url = `${BASE_URL}/?key=${API_KEY}&\n  // q=yellow+flower&image_type=photo&orientation=horizontal&\n  // safesearch=true&${params}`;\n  const url = `${BASE_URL}/?${params}`;\n  console.log(url);\n  return fetch(url).then(response => {\n    if (!response.ok) {\n      throw new Error(response.status);\n    }\n\n    return response.json();\n  });\n}\n\nfunction renderHits(arr) {\n  const markup = arr\n    .map(item => {\n      return `<div class=\"photo-card\">\n        <img src=\"${item.webformatURL}\" alt=\"${item.tags}\" loading=\"lazy\" />\n       <div class=\"info\">\n        <p class=\"info-item\">\n            <b>Likes: ${item.likes}</b>\n        </p>\n        <p class=\"info-item\">\n            <b>Views: ${item.views}</b>\n        </p>\n        <p class=\"info-item\">\n            <b>Comments: ${item.comments}</b>\n        </p>\n        <p class=\"info-item\">\n            <b>Downloads: ${item.downloads}</b>\n        </p>\n        </div>\n          </div>`;\n    })\n    .join('');\n\n  refs.photosContainer.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction clearPhotosContainer() {\n  refs.photosContainer.innerHTML = ' ';\n}\n// function renderPosts(posts) {\n//   const markup = posts\n//     .map(({ id, title, body, userId }) => {\n//       return `<li>\n//           <h2 class=\"post-title\">${title.slice(0, 30)}</h2>\n//           <p><b>Post id</b>: ${id}</p>\n//           <p><b>Author id</b>: ${userId}</p>\n//           <p class=\"post-body\">${body}</p>\n//         </li>`;\n//     })\n//     .join(\"\");\n//   postList.insertAdjacentHTML(\"beforeend\", markup);\n// }\n\n// function toggleAlertPopup() {\n//   if (isAlertVisible) {\n//     return;\n//   }\n//   isAlertVisible = true;\n//   alertPopup.classList.add(\"is-visible\");\n//   setTimeout(() => {\n//     alertPopup.classList.remove(\"is-visible\");\n//     isAlertVisible = false;\n//   }, 3000);\n// }\n"],"names":["$b8f9b7833fa37166$var$query","$b8f9b7833fa37166$var$refs","searchForm","document","querySelector","photosContainer","loadMoreBtn","$b8f9b7833fa37166$var$page","$b8f9b7833fa37166$var$fetchPhotos","params","URLSearchParams","key","q","image_type","orientation","safesearch","per_page","page","url","concat","console","log","fetch","then","response","ok","Error","status","json","$b8f9b7833fa37166$var$renderHits","arr","markup","map","item","webformatURL","tags","likes","views","comments","downloads","join","insertAdjacentHTML","classList","add","addEventListener","e","preventDefault","innerHTML","$b8f9b7833fa37166$var$clearPhotosContainer","currentTarget","elements","searchQuery","value","alert","data","hits","length","catch","error","remove","totalHits"],"version":3,"file":"index.8551b6e8.js.map"}